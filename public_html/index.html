<!DOCTYPE html>
<html>
<head>
  <title>Is there food in West Village H?</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.css">
  <script type="text/javascript" src="js/bootstrap.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      function getTime(time){
        var t = Math.round(+new Date()/1000);
        var diff = t - time;        
        return Math.round(diff/60);
    
      }

      function reloadJSON(){
        $.getJSON('/api.php?getlatest',
          function(data){            
            if(data.recent == "true"){
              var name = "";
              if(data.hasName == "true"){
                name = " by "+data.name;
              }
              $("#answer").text(data.room);
              $("#answer").css("color", "green");
              $(".posted").text("posted "+getTime(parseInt(data.time))+" minutes ago"+name);
            }
            else {
              $("#answer").text("NOPE."); 
              $("#answer").css("color", "red");
              $(".posted").text("");
            }
          }
        );
      }
      reloadJSON();
      setInterval(reloadJSON, 1000);
    });
  </script>
  <style type="text/css">
    .hero-unit {
      text-align:center;
    }
  </style>
</head>
<div class="container">
  <div class="row">
    <div class="hero-unit">
      <h1>Is there food in WVH?</h1>
      <p>Probably</p>
    </div>
  </div>
  <div class="row">
    <div class="hero-unit">
      <h1 id="answer"></h1>
      <p class="posted"></p>
    </div>
  </div>
  <div class="row">
    <div class="span3">
      <h1>What is this?</h1>
      <p>This is a little service I created to notify users when there is free food available in WVH.</p>
    </div>
    <div class="span3">
      <h1>How do I use?</h1>
      <p>Just text <strong>(617) 544-3984</strong> the location of where the free food is, the app will take care of the rest.</p>
    </div>
    <div class="span3">
      <h1>Accuracy rate?</h1>
      <p>This app will simply report on the latest sent in text from the past hour.</p>
    </div>
    <div class="span3">
      <h1>Trust me</h1>
      <p>Do you want to become a trusted submitter? Just text <strong>(617) 544-3984</strong>: REG YourName.</p>
    </div>
  </div>
</div>
<body>
</body>
</html>
